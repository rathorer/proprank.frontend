---
import { getCollection } from "astro:content";
import CaseStudyCard from "components/CaseStudyCard.astro";
import MotionGraphicCard from "components/MotionGraphicCard.astro";
import HorizontalRuleHeading from "../components/HorizontalRuleHeading.astro";
import InfographicCard from "../components/InfographicCard.astro";
import Roller from "../components/Roller.astro";
import { HOMEPAGE_ARTICLE_LIMIT } from "../constants";
import MainLayout from "../layouts/MainLayout.astro";

export const prerender = true;
//  In the sorted Or
const infographics = (await getCollection("infographics")).sort(
	(a, b) =>
		new Date(b.data.createdAt).getTime() -
		new Date(a.data.createdAt).getTime(),
);
const caseStudy = (await getCollection("caseStudy")).sort(
	(a, b) =>
		new Date(b.data.createdAt).getDate() -
		new Date(a.data.createdAt).getDate(),
);
const motionGraphics = (await getCollection("motionGraphics")).sort(
	(a, b) =>
		new Date(b.data.createdAt).getDate() -
		new Date(a.data.createdAt).getDate(),
);
---

<MainLayout>
	<div
		class="relative bg-center bg-cover bg-no-repeat h-[660px] mb-[850px] sm:mb-48 lg:mb-64 2xl:mb-80 bg-[url(/bg-image.png)] size-full"
	>
		<div
			class="absolute inset-0 bg-gradient-to-b from-[#30353E]/[85%] via-[#30353E]/[95%] to-[#30353E]"
			id="backgroundCover"
		>
		</div>
		<div
			class="absolute flex flex-col justify-center top-[24%] sm:top-[20%] w-full 2xl:px-56"
			id="landingPageText&Roller"
		>
			<div
				class="flex flex-col text-[32px] sm:text-3xl md:text-4xl lg:text-5xl text-white items-center"
			>
				<div class="font-bold tracking-wider text-center">Decoding</div>
				<Roller />
			</div>
			<!-- <div
				class="text-center w-full flex justify-center mt-6 animate-bounce"
			>
				<div id="cta" class="cursor-pointer">
					<img
						src="/ctaarrow.png"
						alt="arrow"
						class="w-12 h-12 sm:w-14 sm:h-14 lg:w-full lg:h-full"
					/>
				</div>
			</div> -->
		</div>
		<div
			class="absolute px-2 grid grid-cols-1 sm:grid-cols-3 md:gap-x-[12px] gap-x-4 gap-y-4 sm:px-8 2xl:px-56 top-[65%] sm:top-[65%] md:top-[62%] lg:top-[65%] z-0"
			id="UspCards"
		>
			<div
				class="bg-white shadow-lg rounded-lg p-4 w-11/12 h-full sm:w-full flex flex-col mx-auto"
			>
				<h2
					class="text-[14px] md:text-[18px] lg:text-2xl font-medium text-center md:mb-2 lg:mb-4 text-[#30353E]"
				>
					{"{ Beyond Hype }"}
				</h2>
				<img
					src="/simplifying-ill.png"
					class="h-[200px] lg:h-[265px] mx-auto mb-2 "
				/>
				<p class="text-[#72839c] text-center text-base h-auto">
					Simplifying the complex world of Indian real-estate
				</p>
			</div>
			<div
				class="bg-white shadow-lg rounded-lg p-4 w-11/12 h-full sm:w-full flex flex-col mx-auto"
			>
				<h2
					class="text-[14px] md:text-[18px] lg:text-2xl font-medium text-center md:mb-2 lg:mb-4 text-[#30353E] "
				>
					{"{ Beyond Narratives }"}
				</h2>
				<img src="/redefiningillustration.png" class="h-[200px] lg:h-[265px] mx-auto mb-2" />
				<p class="text-[#72839c] text-center text-base h-fit">
					Redefining the fundamentals with ground-up insights
				</p>
			</div>
			<div
				class="bg-white shadow-lg rounded-lg p-4 w-11/12 h-full sm:w-full flex flex-col mx-auto"
			>
				<h2
					class="text-[14px] md:text-[18px] lg:text-2xl font-medium text-center text-[#30353E] md:mb-2 lg:mb-4"
				>
					{"{ Beyond Claims }"}
				</h2>
				<img src="/unfolding-ill.png" class="h-[200px] lg:h-[265px] mx-auto mb-2" />
				<p class="text-[#72839c] text-center text-base h-fit">
					Uncovering growth opportunities and underlying risks
				</p>
			</div>
		</div>
	</div>

	<div class="py-4 px-8 mb-14 bg-[#30353E] text-white 2xl:px-56">
		<div class="px-24 sm:hidden">
			<hr class="border border-x-[#9aa6b8]" />
		</div>
		<div
			class="sm:border-x-[4px] sm:border-x-[#9aa6b8] py-5 text-2xl sm:text-3xl 2xl:text-[38px] text-center font-medium sm:!leading-[3rem] sm:px-20 2xl:!leading-[4rem]"
		>
			Insights that empowers you to make informed property decisions
		</div>
		<div class="px-24 sm:hidden">
			<hr class="border border-x-[#9aa6b8]" />
		</div>
	</div>

	<!-- Infographics Section -->
	<div class="px-4 sm:px-8 2xl:px-56 mb-20 bg-white" id="infographics">
		<HorizontalRuleHeading
			title={"Propview"}
			url="/infographics"
			imageUrl="/infographicIcon.png"
			imageClass="w-auto h-9"
		/>
		<div
			class="grid grid-cols-1 gap-x-8 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 mt-10 gap-y-14"
		>
			{
				infographics
					.slice(0, HOMEPAGE_ARTICLE_LIMIT)
					.map((article) => <InfographicCard infographic={article} />)
			}
		</div>
	</div>

	<!-- Case Study Section-->
	<div class="px-4 sm:px-8 2xl:px-56 mb-20 bg-white" id="caseStudy">
		<HorizontalRuleHeading
			title={"Propstory"}
			url="/caseStudy"
			imageUrl="/storiesIcon.png"
			imageClass="w-auto h-8"
		/>
		<div class="grid grid-cols-1 gap-x-2 gap-y-6 lg:grid-cols-2 mt-10">
			{
				caseStudy
					.slice(0, HOMEPAGE_ARTICLE_LIMIT)
					.map((article) => <CaseStudyCard caseStudy={article} />)
			}
		</div>
	</div>

	<!-- Shorts Section -->
	<div class="px-4 sm:px-8 2xl:px-56 mb-20 bg-white" id="Shorts">
		<HorizontalRuleHeading
			title={"Propshorts"}
			url="/shorts"
			imageUrl="/shortsIcon.png"
			imageClass="w-auto h-9"
		/>

		<div
			class="grid grid-cols-1 gap-x-8 gap-y-14 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 mt-10"
		>
			{
				motionGraphics
					.slice(0, HOMEPAGE_ARTICLE_LIMIT)
					.map((article) => (
						<MotionGraphicCard motiongraphic={article} />
					))
			}
		</div>
	</div>
</MainLayout>

<script is:inline>
	document.getElementById("cta")?.addEventListener("click", (event) => {
		event.preventDefault();
		document
			.getElementById("infographics")
			?.scrollIntoView({ behavior: "smooth" });
	});
</script>
