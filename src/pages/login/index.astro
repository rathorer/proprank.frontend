---
import MainLayout from "../../layouts/MainLayout.astro";
import Login from "../../components/login";
// import { Auth, SignIn, SignOut } from 'auth-astro/components'
// const data = Astro.locals;

---
<MainLayout>
   <!-- <Auth> -->
      <Login client:load />
      <!-- <SignIn provider={'custom-jwt'}/>
      <SignOut/> -->
      <!-- <form method="POST" class="space-y-6" id="loginform">
         <div>
             <label for="email" class="block text-sm font-medium text-neutral-600"> Email address </label>
             <div class="mt-1">
                 <input id="email" name="email" type="email" autocomplete="email" required placeholder="Your Email" class="block w-full px-5 py-3 text-base text-neutral-600 placeholder-gray-300 transition duration-500 ease-in-out transform border border-transparent rounded-lg bg-gray-50 focus:outline-none focus:border-transparent focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-300" />
             </div>
         </div>

         <div class="space-y-1">
             <label for="password" class="block text-sm font-medium text-neutral-600"> Password </label>
             <div class="mt-1">
                 <input id="password" name="password" type="password" autocomplete="current-password" required placeholder="Your Password" class="block w-full px-5 py-3 text-base text-neutral-600 placeholder-gray-300 transition duration-500 ease-in-out transform border border-transparent rounded-lg bg-gray-50 focus:outline-none focus:border-transparent focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-300" />
             </div>
         </div>

         <div class="flex items-center justify-center">
             {/* <div class="flex items-center">
                 <input id="remember-me" name="remember-me" type="checkbox" placeholder="Your password" class="w-4 h-4 text-blue-600 border-gray-200 rounded focus:ring-blue-500" />
                 <label htmlFor="remember-me" class="block ml-2 text-sm text-neutral-600"> Remember me </label>
             </div> */}
             <div class="text-sm">
                 <a href="#" class="font-medium text-blue-600 hover:text-blue-500"> Forgot your password? </a>
             </div>
         </div>

         <div>
             <button type="submit" class="flex items-center justify-center w-full px-10 py-4 text-base font-medium text-center text-white transition duration-500 ease-in-out transform bg-blue-600 rounded-xl hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">Sign in</button>
         </div>
        </form> -->
        <!-- <Auth>
            <SignIn provider="customjwt">
               login
           </SignIn>
        </Auth> -->
   <!-- </Auth> -->
</MainLayout>
   <script>
import { signIn } from "auth-astro/client";

      const form = document.getElementById('loginform');
      form?.addEventListener('submit',handleSubmit);
      async function handleSubmit(event) {
         event.preventDefault();
         console.log(event.target);
         const form = new FormData( event.target);
         const email = form.get('email');
         const password = form.get('password');
         console.log(email,password, "login page");
         await signIn('customjwt', { email, password, redirect:true, callbackUrl:'/' });
      }
</script>